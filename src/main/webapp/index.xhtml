<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h5e="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:h5a="http://xmlns.jcp.org/jsf">
<f:view>
	<h:head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<h:outputScript name="js/handlers.js" target="head" />
		<title>Test</title>
	</h:head>
	<h:body>
		<p>Open javascript console to monitor console.log messages and set a breakpoint on the js/handlers.js#pushSenderListener to see what actual object is returned.</p>
		<p>In the case RECORD - object is empty</p>
		<p>In the case AVRO - it actually crashes</p>
		<p>In the case POJO - all is normal</p>
		<h:form id="pushForm">
			<h:selectOneRadio value="#{bean.option}">
				<f:selectItems value="#{bean.availableOptions}"/>
			</h:selectOneRadio>
			<h:commandButton value="Send push message via websocket" _actionListener="#{bean.pushSenderListener}">
				<f:ajax execute="pushForm" listener="#{bean.pushSenderListener}"/>
			</h:commandButton>
		</h:form>
		<f:websocket channel="wsPushNotifications" onmessage="pushSenderListener"/>
	</h:body>
</f:view>

</html>
